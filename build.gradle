buildscript {
    repositories {
        mavenLocal()
        mavenCentral()
        jcenter()
    }

    dependencies {
        classpath "org.elasticsearch.gradle:build-tools:${elastic_version}"
    }
}

group = 'org.elasticsearch.plugin'
version = "${plugin_version}"

apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'elasticsearch.esplugin'

licenseFile = rootProject.file('LICENSE')
noticeFile = rootProject.file('README.md')

// remove this again after 7.3.1
configurations.restSpec.withDependencies { dependencies ->
    dependencies.clear()
    dependencies.add(project.dependencies.create("org.elasticsearch:rest-api-spec:${elastic_version}"))
}

esplugin {
    name 'elasticsearch-plugin-geoshape'
    description 'Add extra geo capabilities to default elastic geo_shape data type.'
    classname 'org.opendatasoft.elasticsearch.plugin.GeoExtensionPlugin'
    licenseFile = rootProject.file('LICENSE')
    noticeFile = rootProject.file('README.md')
}


dependencies {
    compile "org.elasticsearch:elasticsearch:${elastic_version}"
    // WARNING: jts-io-common version has to be identical to the elastic:jts one (here: 1.15.0)
    compile group: 'org.locationtech.jts.io', name: 'jts-io-common', version: '1.15.0'
    compile group: 'com.googlecode.json-simple', name: 'json-simple', version: '1.1.1'
}

test.enabled = false

// Skip license headers check
licenseHeaders.enabled = false

// Use elasticsearch checkstyle rules
checkstyleTest.enabled = true

dependencyLicenses.enabled = false

thirdPartyAudit.enabled = true
